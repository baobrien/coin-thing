EESchema Schematic File Version 4
EELAYER 30 0
EELAYER END
$Descr A4 11693 8268
encoding utf-8
Sheet 4 4
Title ""
Date ""
Rev ""
Comp ""
Comment1 ""
Comment2 ""
Comment3 ""
Comment4 ""
$EndDescr
Wire Wire Line
	5050 3600 6200 3600
$Comp
L Device:C C8
U 1 1 5FAE8F38
P 1050 1350
F 0 "C8" H 1165 1396 50  0000 L CNN
F 1 "1uF" H 1165 1305 50  0000 L CNN
F 2 "Capacitor_SMD:C_0603_1608Metric" H 1088 1200 50  0001 C CNN
F 3 "~" H 1050 1350 50  0001 C CNN
	1    1050 1350
	1    0    0    -1  
$EndComp
$Comp
L Regulator_Linear:MCP1703A-3302_SOT23 U6
U 1 1 5FAE9B0E
P 1850 1100
F 0 "U6" H 1850 1342 50  0000 C CNN
F 1 "MCP1703A-3302_SOT23" H 1850 1251 50  0000 C CNN
F 2 "Package_TO_SOT_SMD:SOT-23" H 1850 1300 50  0001 C CNN
F 3 "http://ww1.microchip.com/downloads/en/DeviceDoc/20005122B.pdf" H 1850 1050 50  0001 C CNN
F 4 "SC662K-3.3V" H 1850 1100 50  0001 C CNN "Part Alt"
	1    1850 1100
	1    0    0    -1  
$EndComp
$Comp
L Device:C C9
U 1 1 5FAEA945
P 2500 1350
F 0 "C9" H 2615 1396 50  0000 L CNN
F 1 "1uF" H 2615 1305 50  0000 L CNN
F 2 "Capacitor_SMD:C_0603_1608Metric" H 2538 1200 50  0001 C CNN
F 3 "~" H 2500 1350 50  0001 C CNN
	1    2500 1350
	1    0    0    -1  
$EndComp
Wire Wire Line
	1050 1200 1050 1100
Wire Wire Line
	1050 1100 1550 1100
Wire Wire Line
	2150 1100 2500 1100
Wire Wire Line
	2500 1100 2500 1200
Wire Wire Line
	1050 1500 1050 1600
Wire Wire Line
	1050 1600 1850 1600
Wire Wire Line
	2500 1600 2500 1500
Wire Wire Line
	1850 1400 1850 1600
Connection ~ 1850 1600
Wire Wire Line
	1850 1600 2500 1600
$Comp
L power:GND #PWR0121
U 1 1 5FAEB806
P 1050 1700
F 0 "#PWR0121" H 1050 1450 50  0001 C CNN
F 1 "GND" H 1055 1527 50  0000 C CNN
F 2 "" H 1050 1700 50  0001 C CNN
F 3 "" H 1050 1700 50  0001 C CNN
	1    1050 1700
	1    0    0    -1  
$EndComp
Wire Wire Line
	1050 1700 1050 1600
Connection ~ 1050 1600
$Comp
L power:GND #PWR0122
U 1 1 5FAEBD6B
P 2500 1700
F 0 "#PWR0122" H 2500 1450 50  0001 C CNN
F 1 "GND" H 2505 1527 50  0000 C CNN
F 2 "" H 2500 1700 50  0001 C CNN
F 3 "" H 2500 1700 50  0001 C CNN
	1    2500 1700
	1    0    0    -1  
$EndComp
Wire Wire Line
	2500 1700 2500 1600
Connection ~ 2500 1600
$Comp
L Device:C C10
U 1 1 5FAEC7BC
P 1650 4600
F 0 "C10" H 1765 4646 50  0000 L CNN
F 1 ".1uF" H 1765 4555 50  0000 L CNN
F 2 "Capacitor_SMD:C_0603_1608Metric" H 1688 4450 50  0001 C CNN
F 3 "~" H 1650 4600 50  0001 C CNN
	1    1650 4600
	1    0    0    -1  
$EndComp
Text Label 2500 1100 2    50   ~ 0
3V3M
Text Label 1050 1100 0    50   ~ 0
VBUS
Wire Wire Line
	3250 1800 3500 1800
Wire Wire Line
	3500 1800 3500 1850
Text Label 3250 1800 0    50   ~ 0
3V3M
$Comp
L power:GND #PWR0123
U 1 1 5FAED96D
P 1650 4850
F 0 "#PWR0123" H 1650 4600 50  0001 C CNN
F 1 "GND" H 1655 4677 50  0000 C CNN
F 2 "" H 1650 4850 50  0001 C CNN
F 3 "" H 1650 4850 50  0001 C CNN
	1    1650 4850
	1    0    0    -1  
$EndComp
Wire Wire Line
	1650 4850 1650 4750
$Comp
L power:GND #PWR0124
U 1 1 5FAEDDD2
P 4450 4250
F 0 "#PWR0124" H 4450 4000 50  0001 C CNN
F 1 "GND" H 4455 4077 50  0000 C CNN
F 2 "" H 4450 4250 50  0001 C CNN
F 3 "" H 4450 4250 50  0001 C CNN
	1    4450 4250
	1    0    0    -1  
$EndComp
Wire Wire Line
	4450 4000 4450 4100
$Comp
L power:GND #PWR0125
U 1 1 5FAFFB57
P 4550 1500
F 0 "#PWR0125" H 4550 1250 50  0001 C CNN
F 1 "GND" H 4555 1327 50  0000 C CNN
F 2 "" H 4550 1500 50  0001 C CNN
F 3 "" H 4550 1500 50  0001 C CNN
	1    4550 1500
	1    0    0    -1  
$EndComp
Wire Wire Line
	4350 1450 4550 1450
Wire Wire Line
	4550 1450 4550 1500
Wire Wire Line
	4550 1950 4450 1950
Wire Wire Line
	4450 1950 4050 1950
Connection ~ 4450 1950
Text Label 4050 1950 0    50   ~ 0
3V3M
Wire Wire Line
	4350 1350 4700 1350
Wire Wire Line
	4700 1250 4350 1250
Wire Wire Line
	4700 1150 4350 1150
$Comp
L Connector_Generic:Conn_01x05 J6
U 1 1 5FB02B89
P 4150 1250
F 0 "J6" H 4068 1667 50  0000 C CNN
F 1 "Conn_01x05" H 4068 1576 50  0000 C CNN
F 2 "Connector_PinHeader_2.54mm:PinHeader_1x05_P2.54mm_Vertical" H 4150 1250 50  0001 C CNN
F 3 "~" H 4150 1250 50  0001 C CNN
	1    4150 1250
	-1   0    0    -1  
$EndComp
Text Label 4700 1350 2    50   ~ 0
3V3M
Text Label 4700 1250 2    50   ~ 0
NRST
Text Label 4700 1150 2    50   ~ 0
SWDIO
Text Label 4700 1050 2    50   ~ 0
SWCLK
Wire Wire Line
	4700 1050 4350 1050
Wire Wire Line
	5450 3700 5050 3700
Wire Wire Line
	5450 3800 5050 3800
Text Label 5450 3800 2    50   ~ 0
SWDIO
Text Label 5450 3700 2    50   ~ 0
SWCLK
$Comp
L Device:R_US R18
U 1 1 5FB0910A
P 3500 4100
F 0 "R18" H 3568 4146 50  0000 L CNN
F 1 "10k" H 3568 4055 50  0000 L CNN
F 2 "Resistor_SMD:R_0402_1005Metric" V 3540 4090 50  0001 C CNN
F 3 "~" H 3500 4100 50  0001 C CNN
	1    3500 4100
	1    0    0    -1  
$EndComp
Wire Wire Line
	4050 3800 3500 3800
Wire Wire Line
	3500 3800 3500 3950
Text Label 3500 3800 0    50   ~ 0
BOOT0
$Comp
L power:GND #PWR0126
U 1 1 5FB0C28A
P 3500 4400
F 0 "#PWR0126" H 3500 4150 50  0001 C CNN
F 1 "GND" H 3505 4227 50  0000 C CNN
F 2 "" H 3500 4400 50  0001 C CNN
F 3 "" H 3500 4400 50  0001 C CNN
	1    3500 4400
	1    0    0    -1  
$EndComp
Wire Wire Line
	3500 4400 3500 4250
Text Label 3750 2300 0    50   ~ 0
NRST
$Comp
L Device:R_US R17
U 1 1 5FB12B0A
P 3500 2000
F 0 "R17" H 3568 2046 50  0000 L CNN
F 1 "10k" H 3568 1955 50  0000 L CNN
F 2 "Resistor_SMD:R_0402_1005Metric" V 3540 1990 50  0001 C CNN
F 3 "~" H 3500 2000 50  0001 C CNN
	1    3500 2000
	1    0    0    -1  
$EndComp
Wire Wire Line
	3500 2300 3500 2150
Wire Wire Line
	3500 2300 4050 2300
Wire Wire Line
	1650 4450 1650 4300
Wire Wire Line
	1650 4300 1900 4300
Text Label 1900 4300 2    50   ~ 0
3V3M
Text HLabel 2650 1100 2    50   Input ~ 0
3V3USB
Wire Wire Line
	2650 1100 2500 1100
Connection ~ 2500 1100
NoConn ~ 4050 3300
Text HLabel 1150 2300 0    50   BiDi ~ 0
SDA
Text HLabel 1150 2900 0    50   BiDi ~ 0
SCL
Connection ~ 3500 3800
Text Notes 8350 6350 0    39   ~ 0
Copyright Brady Oâ€™Brien 2021\n\nThis source describes Open Hardware and is licensed under the CERN-OHL-W v2\n\nYou may redistribute and modify this documentation and make products using it under\nthe terms of the CERN-OHL-W v2 (https:/cern.ch/cern-ohl). This documentation is\ndistributed WITHOUT ANY EXPRESS OR IMPLIED WARRANTY, INCLUDING OF MERCHANTABILITY,\nSATISFACTORY QUALITY AND FITNESS FOR A PARTICULAR PURPOSE. Please see the\nCERN-OHL-W v2 for applicable conditions.\n\nSource location: https://github.com/baobrien/coin-thing
Wire Notes Line
	8300 5600 8300 6450
Wire Notes Line
	8300 6450 11150 6450
Wire Notes Line
	11150 6450 11150 5600
Wire Notes Line
	11150 5600 8300 5600
$Comp
L Switch:SW_SPST SW1
U 1 1 6034D695
P 3000 3800
F 0 "SW1" H 3000 4035 50  0000 C CNN
F 1 "TS-1187A-C-E-B" H 3000 3944 50  0001 C CNN
F 2 "Button_Switch_SMD:SW_SPST_TL3342" H 3000 3800 50  0001 C CNN
F 3 "~" H 3000 3800 50  0001 C CNN
F 4 "TS-1187A-C-E-B" H 3000 3800 50  0001 C CNN "Part"
	1    3000 3800
	1    0    0    -1  
$EndComp
Text Label 2450 3800 0    50   ~ 0
3V3M
Wire Wire Line
	2450 3800 2800 3800
Wire Wire Line
	3200 3800 3500 3800
Text Notes 2900 4000 0    50   ~ 0
DFU\nBoot
Text Notes 3550 1200 0    50   ~ 0
SWD Header
$Comp
L Transistor_FET:BSS138 Q?
U 1 1 60427585
P 1750 2200
AR Path="/60427585" Ref="Q?"  Part="1" 
AR Path="/5FDC9904/60427585" Ref="Q2"  Part="1" 
F 0 "Q2" V 1750 1950 50  0000 L CNN
F 1 "BSS123L" V 1650 1750 50  0000 L CNN
F 2 "Package_TO_SOT_SMD:SOT-23" H 1950 2125 50  0001 L CIN
F 3 "https://www.fairchildsemi.com/datasheets/BS/BSS138.pdf" H 1750 2200 50  0001 L CNN
	1    1750 2200
	0    -1   1    0   
$EndComp
Wire Wire Line
	2400 2800 2400 2300
Wire Wire Line
	2400 2300 1950 2300
Wire Wire Line
	2400 2800 2750 2800
Wire Wire Line
	1150 2300 1550 2300
Text Label 2100 1850 2    50   ~ 0
3V3M
Wire Wire Line
	2100 1850 1750 1850
Wire Wire Line
	1750 1850 1750 2000
$Comp
L Transistor_FET:BSS138 Q?
U 1 1 60436D03
P 1750 2800
AR Path="/60436D03" Ref="Q?"  Part="1" 
AR Path="/5FDC9904/60436D03" Ref="Q3"  Part="1" 
F 0 "Q3" V 1750 2550 50  0000 L CNN
F 1 "BSS123L" V 1650 2350 50  0000 L CNN
F 2 "Package_TO_SOT_SMD:SOT-23" H 1950 2725 50  0001 L CIN
F 3 "https://www.fairchildsemi.com/datasheets/BS/BSS138.pdf" H 1750 2800 50  0001 L CNN
	1    1750 2800
	0    -1   1    0   
$EndComp
Text Notes 1200 3500 0    50   ~ 0
I2C 'Level Converters' \nto isolate MCU from RPI\n
Wire Wire Line
	1950 2900 3100 2900
Wire Wire Line
	1150 2900 1550 2900
Wire Wire Line
	1750 2600 1750 2500
Wire Wire Line
	1750 2500 1450 2500
Wire Wire Line
	1450 2500 1450 1850
Wire Wire Line
	1450 1850 1750 1850
Connection ~ 1750 1850
$Comp
L Device:D_TVS_x2_AAC D13
U 1 1 6051E49B
P 5800 2750
F 0 "D13" H 5800 2967 50  0000 C CNN
F 1 "D_TVS_x2_AAC" H 5800 2876 50  0000 C CNN
F 2 "Package_TO_SOT_SMD:SOT-23" H 5650 2750 50  0001 C CNN
F 3 "~" H 5650 2750 50  0001 C CNN
	1    5800 2750
	1    0    0    -1  
$EndComp
$Comp
L power:GND #PWR0130
U 1 1 60520E3D
P 5800 3150
F 0 "#PWR0130" H 5800 2900 50  0001 C CNN
F 1 "GND" H 5805 2977 50  0000 C CNN
F 2 "" H 5800 3150 50  0001 C CNN
F 3 "" H 5800 3150 50  0001 C CNN
	1    5800 3150
	1    0    0    -1  
$EndComp
Wire Wire Line
	5050 3500 5400 3500
Wire Wire Line
	6150 2750 6200 2750
Wire Wire Line
	5450 2750 5400 2750
Wire Wire Line
	5400 2750 5400 3500
Wire Wire Line
	5800 2900 5800 3150
$Comp
L Device:LED D?
U 1 1 6052FA5C
P 5950 1600
AR Path="/6052FA5C" Ref="D?"  Part="1" 
AR Path="/5FDC9904/6052FA5C" Ref="D14"  Part="1" 
F 0 "D14" H 5950 1450 50  0000 C CNN
F 1 "LED" H 5800 1450 50  0000 C CNN
F 2 "LED_SMD:LED_0603_1608Metric" H 5950 1600 50  0001 C CNN
F 3 "~" H 5950 1600 50  0001 C CNN
	1    5950 1600
	-1   0    0    1   
$EndComp
$Comp
L Device:R_US R?
U 1 1 6052FA62
P 5550 1600
AR Path="/6052FA62" Ref="R?"  Part="1" 
AR Path="/5FDC9904/6052FA62" Ref="R26"  Part="1" 
F 0 "R26" V 5450 1550 50  0000 R CNN
F 1 "470" V 5450 1750 50  0000 R CNN
F 2 "Resistor_SMD:R_0402_1005Metric" V 5590 1590 50  0001 C CNN
F 3 "~" H 5550 1600 50  0001 C CNN
	1    5550 1600
	0    1    1    0   
$EndComp
Wire Wire Line
	5700 1600 5800 1600
Wire Wire Line
	5250 2300 5250 1600
Wire Wire Line
	5250 1600 5400 1600
Wire Wire Line
	6100 1600 6250 1600
Wire Wire Line
	6250 1600 6250 1800
$Comp
L power:GND #PWR0131
U 1 1 60534C96
P 6250 1800
F 0 "#PWR0131" H 6250 1550 50  0001 C CNN
F 1 "GND" H 6255 1627 50  0000 C CNN
F 2 "" H 6250 1800 50  0001 C CNN
F 3 "" H 6250 1800 50  0001 C CNN
	1    6250 1800
	1    0    0    -1  
$EndComp
$Comp
L Device:R_US R29
U 1 1 60525D10
P 2750 2450
F 0 "R29" H 2818 2496 50  0000 L CNN
F 1 "10k" H 2818 2405 50  0000 L CNN
F 2 "Resistor_SMD:R_0402_1005Metric" V 2790 2440 50  0001 C CNN
F 3 "~" H 2750 2450 50  0001 C CNN
	1    2750 2450
	1    0    0    -1  
$EndComp
$Comp
L Device:R_US R30
U 1 1 605261A3
P 3100 2450
F 0 "R30" H 3168 2496 50  0000 L CNN
F 1 "10k" H 3168 2405 50  0000 L CNN
F 2 "Resistor_SMD:R_0402_1005Metric" V 3140 2440 50  0001 C CNN
F 3 "~" H 3100 2450 50  0001 C CNN
	1    3100 2450
	1    0    0    -1  
$EndComp
Wire Wire Line
	2750 2600 2750 2800
Connection ~ 2750 2800
Wire Wire Line
	2750 2800 4050 2800
Wire Wire Line
	3100 2600 3100 2900
Connection ~ 3100 2900
Wire Wire Line
	3100 2900 4050 2900
Text Label 3000 2200 2    50   ~ 0
3V3M
Wire Wire Line
	2750 2200 3100 2200
Wire Wire Line
	3100 2200 3100 2300
Wire Wire Line
	2750 2200 2750 2300
Connection ~ 5400 3500
Connection ~ 6200 3200
Wire Wire Line
	6200 2750 6200 3200
Wire Wire Line
	6200 3600 6200 3200
$Comp
L MCU_ST_STM32F0:STM32F042K6Tx U9
U 1 1 6073DD2D
P 4550 3000
F 0 "U9" H 4550 1911 50  0000 C CNN
F 1 "STM32F042K6Tx" H 4550 1820 50  0000 C CNN
F 2 "Package_QFP:LQFP-32_7x7mm_P0.8mm" H 4150 2100 50  0001 R CNN
F 3 "http://www.st.com/st-web-ui/static/active/en/resource/technical/document/datasheet/DM00105814.pdf" H 4550 3000 50  0001 C CNN
	1    4550 3000
	1    0    0    -1  
$EndComp
Wire Wire Line
	5400 3500 6300 3500
Text Label 6350 3200 0    50   ~ 0
USB_P
Text Label 6350 3300 0    50   ~ 0
USB_N
Wire Wire Line
	7000 3650 7100 3650
Text HLabel 7000 3650 0    50   Input ~ 0
GND
Text HLabel 7050 3000 0    50   Input ~ 0
VUSBUS
Wire Wire Line
	7750 4200 7750 4050
$Comp
L power:GND #PWR0128
U 1 1 5FB1B9D3
P 7750 4200
F 0 "#PWR0128" H 7750 3950 50  0001 C CNN
F 1 "GND" H 7755 4027 50  0000 C CNN
F 2 "" H 7750 4200 50  0001 C CNN
F 3 "" H 7750 4200 50  0001 C CNN
	1    7750 4200
	1    0    0    -1  
$EndComp
Wire Wire Line
	7750 3600 7750 3750
$Comp
L Device:C C11
U 1 1 5FB1A39D
P 7750 3900
F 0 "C11" H 7865 3946 50  0000 L CNN
F 1 ".1uF" H 7865 3855 50  0000 L CNN
F 2 "Capacitor_SMD:C_0603_1608Metric" H 7788 3750 50  0001 C CNN
F 3 "~" H 7750 3900 50  0001 C CNN
	1    7750 3900
	1    0    0    -1  
$EndComp
Wire Wire Line
	7100 3650 7100 3800
Connection ~ 7100 3650
Wire Wire Line
	7650 3650 7100 3650
Wire Wire Line
	7650 3600 7650 3650
Wire Wire Line
	7100 3400 7100 3650
Wire Wire Line
	7350 3400 7100 3400
$Comp
L power:GND #PWR0127
U 1 1 5FB178BF
P 7100 3800
F 0 "#PWR0127" H 7100 3550 50  0001 C CNN
F 1 "GND" H 7105 3627 50  0000 C CNN
F 2 "" H 7100 3800 50  0001 C CNN
F 3 "" H 7100 3800 50  0001 C CNN
	1    7100 3800
	1    0    0    -1  
$EndComp
Wire Wire Line
	7050 3000 7350 3000
Text Label 7050 3000 0    50   ~ 0
VBUS
Wire Wire Line
	6200 3200 7350 3200
Wire Wire Line
	6300 3300 7350 3300
Wire Wire Line
	6300 3500 6300 3300
$Comp
L coin-trunker-rescue:USB_B_Micro-Connector J7
U 1 1 5FE0CA19
P 7650 3200
F 0 "J7" H 7420 3189 50  0000 R CNN
F 1 "USB_B_Micro" H 7420 3098 50  0000 R CNN
F 2 "coin-trunker:USB_Micro-B_Molex-105017-0001" H 7800 3150 50  0001 C CNN
F 3 "~" H 7800 3150 50  0001 C CNN
F 4 "U254-051T-4BH23-S2B" H 7650 3200 50  0001 C CNN "Part"
	1    7650 3200
	-1   0    0    -1  
$EndComp
Wire Wire Line
	4550 1950 4650 1950
Wire Wire Line
	4650 1950 4650 2100
Connection ~ 4550 1950
Wire Wire Line
	4450 4100 4550 4100
Wire Wire Line
	4550 4100 4550 4000
Connection ~ 4450 4100
Wire Wire Line
	4450 4100 4450 4250
NoConn ~ 4050 3100
NoConn ~ 4050 3200
NoConn ~ 4050 3400
NoConn ~ 4050 3500
NoConn ~ 4050 3600
NoConn ~ 4050 3700
Wire Wire Line
	5050 2300 5250 2300
NoConn ~ 5050 2400
Wire Wire Line
	4550 1950 4550 2100
Wire Wire Line
	4450 1950 4450 2100
NoConn ~ 5050 2500
NoConn ~ 5050 2600
NoConn ~ 5050 2700
NoConn ~ 5050 2800
NoConn ~ 5050 2900
NoConn ~ 5050 3000
NoConn ~ 5050 3100
NoConn ~ 5050 3200
NoConn ~ 5050 3300
NoConn ~ 5050 3400
$EndSCHEMATC
